<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=lhDjYqiy3mZ0x6ROQEUoUw');ul.lst-kix_kg4j11ttfyrn-2{list-style-type:none}.lst-kix_kg4j11ttfyrn-2>li:before{content:"\0025a0  "}.lst-kix_kg4j11ttfyrn-3>li:before{content:"\0025cf  "}ul.lst-kix_kg4j11ttfyrn-3{list-style-type:none}ul.lst-kix_kg4j11ttfyrn-0{list-style-type:none}ul.lst-kix_kg4j11ttfyrn-1{list-style-type:none}ul.lst-kix_kg4j11ttfyrn-6{list-style-type:none}ul.lst-kix_kg4j11ttfyrn-7{list-style-type:none}ul.lst-kix_kg4j11ttfyrn-4{list-style-type:none}ul.lst-kix_kg4j11ttfyrn-5{list-style-type:none}.lst-kix_kg4j11ttfyrn-6>li:before{content:"\0025cf  "}ul.lst-kix_kg4j11ttfyrn-8{list-style-type:none}.lst-kix_kg4j11ttfyrn-4>li:before{content:"\0025cb  "}.lst-kix_kg4j11ttfyrn-5>li:before{content:"\0025a0  "}.lst-kix_pan2wp3066xj-3>li:before{content:"\0025cf  "}.lst-kix_pan2wp3066xj-2>li:before{content:"\0025a0  "}.lst-kix_pan2wp3066xj-0>li:before{content:"\0025cf  "}.lst-kix_pan2wp3066xj-1>li:before{content:"\0025cb  "}ul.lst-kix_pan2wp3066xj-8{list-style-type:none}ul.lst-kix_pan2wp3066xj-7{list-style-type:none}.lst-kix_kg4j11ttfyrn-0>li:before{content:"\0025cf  "}.lst-kix_kg4j11ttfyrn-1>li:before{content:"\0025cb  "}ul.lst-kix_pan2wp3066xj-6{list-style-type:none}ul.lst-kix_pan2wp3066xj-5{list-style-type:none}ul.lst-kix_pan2wp3066xj-4{list-style-type:none}ul.lst-kix_pan2wp3066xj-3{list-style-type:none}ul.lst-kix_pan2wp3066xj-2{list-style-type:none}ul.lst-kix_pan2wp3066xj-1{list-style-type:none}ul.lst-kix_pan2wp3066xj-0{list-style-type:none}.lst-kix_pan2wp3066xj-4>li:before{content:"\0025cb  "}.lst-kix_pan2wp3066xj-5>li:before{content:"\0025a0  "}.lst-kix_pan2wp3066xj-6>li:before{content:"\0025cf  "}.lst-kix_kg4j11ttfyrn-7>li:before{content:"\0025cb  "}.lst-kix_pan2wp3066xj-8>li:before{content:"\0025a0  "}.lst-kix_kg4j11ttfyrn-8>li:before{content:"\0025a0  "}.lst-kix_pan2wp3066xj-7>li:before{content:"\0025cb  "}ol{margin:0;padding:0}table td,table th{padding:0}.c3{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:156pt;border-top-color:#000000;border-bottom-style:solid}.c5{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:234pt;border-top-color:#000000;border-bottom-style:solid}.c4{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:117pt;border-top-color:#000000;border-bottom-style:solid}.c0{color:#000000;font-weight:normal;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c11{border-spacing:0;border-collapse:collapse;margin-right:auto}.c1{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c7{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c2{orphans:2;widows:2;height:11pt}.c8{orphans:2;widows:2}.c9{page-break-after:avoid;text-indent:36pt}.c13{color:#1155cc;text-decoration:underline}.c12{color:inherit;text-decoration:inherit}.c10{page-break-after:avoid}.c6{height:0pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#434343;font-size:11pt;padding-bottom:0pt;font-family:"Consolas";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c7"><h1 class="c8 c10"><a id="h.wluuqg8zs9s5"></a><span>Programming AVRs with FTDI cable or FTDI Friend</span></h1><p class="c8"><span>AVRDude 6.3 seems to finally support bitbanging using FTDI cables and friends (Adafruit FTDI Friends, for example :). You can do this using the ftdi_syncbb programmer type. Here&rsquo;s the relevant section of avrdude.conf:</span></p><p class="c2"><span></span></p><p class="c8 c10 subtitle"><a id="h.jpm8a7vcbe8z"></a><span># FTDI USB to serial cable TTL-232R-5V with a custom adapter for ICSP<br># http://www.ftdichip.com/Products/Cables/USBTTLSerial.htm<br># http://www.ftdichip.com/Support/Documents/DataSheets/Cables/DS_TTL-232R_CABLES.pdf<br># For ICSP pinout see for example http://www.atmel.com/images/doc2562.pdf<br># (Figure 1. ISP6PIN header pinout and Table 1. Connections required for ISP ...)<br># TTL-232R GND 1 Black &nbsp;-&gt; ICPS GND &nbsp; (pin 6)<br># TTL-232R CTS 2 Brown &nbsp;-&gt; ICPS MOSI &nbsp;(pin 4)<br># TTL-232R VCC 3 Red &nbsp; &nbsp;-&gt; ICPS VCC &nbsp; (pin 2)<br># TTL-232R TXD 4 Orange -&gt; ICPS RESET (pin 5)<br># TTL-232R RXD 5 Yellow -&gt; ICPS SCK &nbsp; (pin 3)<br># TTL-232R RTS 6 Green &nbsp;-&gt; ICPS MISO &nbsp;(pin 1)<br># Except for VCC and GND, you can connect arbitual pairs as long as <br># the following table is adjusted.<br>programmer<br> &nbsp;id &nbsp; &nbsp;= &quot;ttl232r&quot;;<br> &nbsp;desc &nbsp;= &quot;FTDI TTL232R-5V with ICSP adapter&quot;;<br> &nbsp;type &nbsp;= &quot;ftdi_syncbb&quot;;<br> &nbsp;connection_type = usb;<br> &nbsp;miso &nbsp;= 2; # rts<br> &nbsp;sck &nbsp; = 1; # rxd<br> &nbsp;mosi &nbsp;= 3; # cts<br> &nbsp;reset = 0; # txd<br>;<br></span></p><p class="c8"><span>It took a bit for me to piece together what these values mean since they seem to vary depending on the programmer type. First, the names on the left (miso, sck, mose, and reset) refer to the AVR pins to connect to. Check out your data sheet for info on which pins these are, but for the ATTiny2313:</span></p><p class="c2"><span></span></p><a id="t.aa39722780a4857077dd8452e00f0295e55f620e"></a><a id="t.0"></a><table class="c11"><tbody><tr class="c6"><td class="c5" colspan="1" rowspan="1"><p class="c1"><span class="c0">ATTiny2313 pin name</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c1"><span class="c0">ATTiny2313 pin #</span></p></td></tr><tr class="c6"><td class="c5" colspan="1" rowspan="1"><p class="c1"><span class="c0">SCK</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c1"><span class="c0">&nbsp;19</span></p></td></tr><tr class="c6"><td class="c5" colspan="1" rowspan="1"><p class="c1"><span class="c0">MISO</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c1"><span class="c0">18</span></p></td></tr><tr class="c6"><td class="c5" colspan="1" rowspan="1"><p class="c1"><span class="c0">MOSI</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c1"><span class="c0">17</span></p></td></tr><tr class="c6"><td class="c5" colspan="1" rowspan="1"><p class="c1"><span class="c0">RESET</span></p></td><td class="c5" colspan="1" rowspan="1"><p class="c1"><span class="c0">1</span></p></td></tr></tbody></table><p class="c2"><span></span></p><p class="c2"><span></span></p><p class="c2"><span></span></p><p class="c8"><span>The numbers on the right of the config (e.g. the 2 in &lsquo;miso = 2&rsquo;) refer to the data bits in FTDI&rsquo;s bitbang mode. You can find more info in the </span><span class="c13"><a class="c12" href="https://www.google.com/url?q=http://www.ftdichip.com/Support/Documents/AppNotes/AN_232R-01_Bit_Bang_Mode_Available_For_FT232R_and_Ft245R.pdf&amp;sa=D&amp;ust=1456117855340000&amp;usg=AFQjCNFTOUg3dzFFmPTT27HeTo49t2JsQQ">application note for bitbang mode</a></span><span>. Regrettably, only the pin numbers are listed and not the pin names (which is what I needed to find out which pinouts on the FTDI Friend corresponded to which pins on the FTDI chip). You can check the </span><span class="c13"><a class="c12" href="https://www.google.com/url?q=http://www.ftdichip.com/Support/Documents/DataSheets/ICs/DS_FT232R.pdf&amp;sa=D&amp;ust=1456117855341000&amp;usg=AFQjCNFYgQf8Kjj86MAvKi6iUJp9VlERGQ">datasheet for the FT232R</a></span><span>&nbsp;for these, but to save you some time here&rsquo;s a list of the pins and their respective name and bit bang data bit:</span></p><p class="c2"><span></span></p><a id="t.05e1f49d4b1be497050b1f5b934c8d896a9bc775"></a><a id="t.1"></a><table class="c11"><tbody><tr class="c6"><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">FT232R pin #</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">FT232R pin name</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">Bit bang data bit</span></p></td></tr><tr class="c6"><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">1</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">TXD</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">0</span></p></td></tr><tr class="c6"><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">5</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">RXD</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">1</span></p></td></tr><tr class="c6"><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">3</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">RTS#</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">2</span></p></td></tr><tr class="c6"><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">11</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">CTS#</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">3</span></p></td></tr><tr class="c6"><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">2</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">DTR#</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">4</span></p></td></tr><tr class="c6"><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">9</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">DSR#</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">5</span></p></td></tr><tr class="c6"><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">10</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">DCD#</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">6</span></p></td></tr><tr class="c6"><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">6</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">RI#</span></p></td><td class="c3" colspan="1" rowspan="1"><p class="c1"><span class="c0">7</span></p></td></tr></tbody></table><p class="c2"><span></span></p><p class="c2"><span></span></p><p class="c8"><span>You can see in the avrdude.conf the author has nicely put the pin names in comments next to each line. These match up with the handy names printed on the FTDI Friend:</span></p><p class="c2"><span></span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 491.00px; height: 326.00px;"><img alt="2016-02-21 19.11.22.jpg" src="images/image00.jpg" style="width: 624.00px; height: 835.00px; margin-left: -133.00px; margin-top: -440.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c8"><span>A standard FTDI cable is above for reference. The pinouts are the same.</span></p><p class="c2"><span></span></p><p class="c8"><span>You can see that the pins we have immediately available to us (aside from VCC and GND) are CTS, TXD, RXD, and RTS. This works great with the ttl232r programmer already present in avrdude.conf, but if your cable/board has different pins available, just use the above table to create a new programmer entry with the data bits you have available.</span></p><p class="c2"><span></span></p><p class="c8"><span>With the above information we can now wire up our programmer to the AVR!</span></p><p class="c2"><span></span></p><a id="t.e450d49b1ccf22763b268d50ba0fe590e215bdf3"></a><a id="t.2"></a><table class="c11"><tbody><tr class="c6"><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">FTDI Friend pin #</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">FTDI Friend pin name</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">ATTiny2313 pin #</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">ATTiny2313 pin name</span></p></td></tr><tr class="c6"><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">1</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">GND</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">10</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">GND</span></p></td></tr><tr class="c6"><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">2</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">CTS</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">17</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">MOSI</span></p></td></tr><tr class="c6"><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">3</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">VCC</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">20</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">VCC</span></p></td></tr><tr class="c6"><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">4</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">TXD</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">1</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">RESET</span></p></td></tr><tr class="c6"><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">5</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">RXD</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">19</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">SCK</span></p></td></tr><tr class="c6"><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">6</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">RTS</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">18</span></p></td><td class="c4" colspan="1" rowspan="1"><p class="c1"><span class="c0">MISO</span></p></td></tr></tbody></table><p class="c2"><span></span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 466.67px;"><img alt="2016-02-21 19.39.36.jpg" src="images/image01.jpg" style="width: 624.00px; height: 466.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c8"><span>(VCC and GND are connected through the bus lines on the breadboard)</span></p><h2 class="c8 c10"><a id="h.qwmyk23hg82v"></a><span>Programming</span></h2><p class="c8"><span>Once it&rsquo;s all connected up, we can program to our heart&rsquo;s content with AVRDude (6.3 as of the time of this writing). One important thing to note here is that the ATTiny2313 (and probably many other AVRs) uses a slow internal clock by default (1MHZ). In order for programming to work with this slow clock I&rsquo;ve had to turn down the baudrate of the programming with the -b parameter:</span></p><p class="c2"><span></span></p><p class="c8 c9 subtitle"><a id="h.c99r7abifyh4"></a><span>avrdude -c ttl232r -p t2313 -b 4800 -U {memory commands go here}</span></p><p class="c2"><span></span></p><p class="c8"><span>We can speed up the clock by unprogramming the CLKDIV8 fuse bit in the LFUSE. By default the LFUSE of the 2313 is set to 0x64 and the MSB is CLKDIV8 (A bit is &ldquo;programmed&rdquo; as logical 0, and &ldquo;unprogrammed&rdquo; as a logical 1). To do this, we set LFUSE to 0xE4 with the following command:</span></p><p class="c2"><span></span></p><p class="c8 c9 subtitle"><a id="h.qx0t0lju1d2f"></a><span>avrdude -c ttl232r -p t2313 -b 4800 -U lfuse:w:0xE4:m</span></p><p class="c2"><span></span></p><p class="c8"><span>Once set, the default baudrate seems to work just fine so you can remove the -b parameter.</span></p></body></html>